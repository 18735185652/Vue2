{"version":3,"file":"vue.js","sources":["../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/compiler/parse.js","../src/compiler/generate.js","../src/compiler/index.js","../src/init.js","../src/index.js"],"sourcesContent":["\nlet oldArrayProtoMethods = Array.prototype;\n\n// 不能直接改写数组原有的方法 不可靠，因为只有被vue控制的数组才需要改写\n\nexport let arrayMethods = Object.create(Array.prototype);\n\n// arrayMethods.__proto__.push\nlet methods = [\n    'push',\n    'pop',\n    'shift',\n    'splice',\n    'reverse',\n    'sort'\n]\n\nmethods.forEach(method => {\n    arrayMethods[method] = function(...args){ // 重写数组方法\n        // todo ... \n        let result = oldArrayProtoMethods[method].call(this,...args);\n        console.log('todo: array change',);\n       // 有可能用户新增的数据是对象格式 也要进行拦截\n       let inserted;\n       switch(method){\n           case 'push':\n           case 'unshilt':\n                inserted = args\n                break;\n            case 'splice': // splice(0,1,xxx)\n                inserted = args.slice(2);\n            default :\n                break;\n       }\n       \n      if(inserted){ // observeArray\n            this.__ob__.observeArray(inserted)\n      }\n\n\n       return result;\n    }\n})","import { arrayMethods } from './array'\nclass Observer {\n    constructor(value) { // 需要对这个value属性重新定义\n        // this.data = value;\n        // value 可能是对象 可能是数组 ，分类来处理\n        Object.defineProperty(value, '__ob__', {\n            value: this,\n            enumerable: false, // 不能被枚举 表示不能被循环\n            configurable: false, // 不能删除此属性\n\n        })\n        if (Array.isArray(value)) {\n            // 数组不用defineProperty来进行处理 性能不好\n            // push shift reverse sort 我要重写这些方法增加更新逻辑\n            value.__proto__ = arrayMethods; // 当是数组时候 改写方法是自己的           \n            // Object.setPrototypeOf(value.protptype,arrayMethods)\n            this.observeArray(value) //处理原有数组中的对象  Object.freeeze\n        } else {\n            this.walk(value);\n        }\n    }\n    walk(data) {\n        // 将对象中所有的key 重新用defineProperty 定义成响应式的\n        Object.keys(data).forEach((key) => {\n            defineReactive(data, key, data[key])\n        })\n    }\n    observeArray(value) {\n        for (let i = 0; i < value.length; i++) {\n            observe(value[i])\n        }\n    }\n}\nfunction defineReactive(data, key, value) { // vue2中数据嵌套尽量不要过深 过深浪费性能\n    // value 可能也是一个对象\n    observe(value)\n    Object.defineProperty(data, key, {\n        get() {\n            return value;\n        },\n        set(newValue) {\n            if (newValue === value) return;\n            observe(newValue) // 如果用户设置的是一个对象 就继续将用户设置的对象变成响应式的\n            value = newValue\n        }\n    })\n}\n\nexport function observe(data) {\n    // 只对 对象类型进行观测 非对象类型无法观测\n    if (typeof data !== 'object' || data == null) {\n        return;\n    }\n    if (data.__ob__) { // 有ob属性说明被观测过了 防止循环引用\n        return;\n    }\n    // 通过类来对实现数据的观测 类可以方便扩展 会产生实例\n    return new Observer(data)\n}","import {observe} from './observer/index.js'\n\n\nexport function initState(vm){\n    // 将所有数据都定义在vm属性上 并且后续更改需要出发视图更新\n    const opts = vm.$options; // 获取用户属性\n    if(opts.props){ //\n\n    }\n    if(opts.methods){ // \n\n    }\n    if(opts.data){ // 数据的初始化\n        initData(vm)\n    }\n    if(opts.computed){ // \n\n    }\n    if(opts.watch){ // \n\n    }\n}\n\nfunction proxy(vm,source,key){\n    Object.defineProperty(vm,key,{\n        get(){\n            return vm[source][key]\n        },\n        set(newValue){\n            vm[source][key] = newValue;\n        }\n    })\n}\nfunction initData(vm){\n    // 数据劫持 Object.defineProperty\n    \n    let data = vm.$options.data;\n    // 通过vm._data获取劫持后的数据，用户就可以拿到 vm._data\n    data  = vm._data = typeof data === 'function' ? data.call(vm) : data;\n\n    // 将vm._data中的数据全部放到vm上\n    for(let key in data){\n        proxy(vm,'_data',key) // vm.name = vm._data.name\n    }\n    // 观测这个数据\n    observe(data);\n}\n\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 可以匹配到标签名 [0]\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // [0] 标签的结束名字;\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\n// console.log(`style='color:\"red\"'`.match(attribute))\nconst startTagClose = /^\\s*(\\/?)>/;\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\n\n//ast语法树\n// let obj = {\n//     tag:'div',\n//     type:1,\n//     attrs:[{styles:'color:red'}],\n//     children:[\n//         {\n//             tag:'span',\n//             type:1,\n//             attrs:[],\n//             children:[]\n//         }\n//     ],\n//     props:null\n// }\n// vue3里面支持多个根元素(外层加了一个空元素) vue2只支持一个根节点\n\nexport function parseHTML(html) {\n    function createASTElement(tag, attrs) {\n        return {\n            tag,\n            type: 1,\n            chhidren: [],\n            attrs,\n            parent: null\n        }\n    }\n    let root = null;\n    let currentParent;\n    let stack = []\n    // 根据开始标签 结束标签 文本内容 生成一个ast语法树\n    function start(tagName, attrs) {\n        let element = createASTElement(tagName, attrs)\n        if (!root) {\n            root = element;\n        }\n        currentParent = element;\n        stack.push(element);\n    }\n    function end(tagName) {\n        let element = stack.pop();\n        currentParent = stack[stack.length - 1]\n        if (currentParent) {\n            element.parent = currentParent;\n            currentParent.chhidren.push(element);\n        }\n    }\n    function chars(text) {\n        text = text.replace(/\\s/g, '');\n        if (text) {\n            currentParent.chhidren.push({\n                type: 3,\n                text\n            })\n        }\n    }\n    function advance(n) {\n        html = html.substring(n);\n    }\n    function parseStartTag() {\n        const start = html.match(startTagOpen)\n        if (start) {\n            let match = {\n                tagName: start[1],\n                attrs: [],\n            }\n            advance(start[0].length) // 获取元素\n            // 查找属性\n            let end, attr; // 不是开头标签结尾就一直解析\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n\n                advance(attr[0].length)\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] || true })\n            }\n            if (end) {\n                advance(end[0].length)\n                return match\n            }\n        }\n\n    }\n\n    while (html) {\n        let textEnd = html.indexOf('<');\n        if (textEnd === 0) {\n            let startTagMatch = parseStartTag();\n            if (startTagMatch) {\n                //    console.log('开始: ', startTagMatch.tagName);\n                start(startTagMatch.tagName, startTagMatch.attrs)\n                continue;\n            }\n            //    console.log('startTagMatch: ', startTagMatch);\n            // 结束标签\n            let endTagMatch = html.match(endTag);\n            if (endTagMatch) {\n                advance(endTagMatch[0].length)\n                // console.log('结尾',endTagMatch[1]);\n                end(endTagMatch[1])\n                continue\n            }\n        }\n        let text;\n        if (textEnd > 0) { // 开始解析文本\n            text = html.substring(0, textEnd);\n        }\n        if (text) {\n            advance(text.length)\n            // console.log('text',text);\n            chars(text)\n        }\n\n    }\n    return root\n}","\nexport function generate(el){\n    console.log('el: ', el);\n\n}","import {parseHTML} from './parse'\nimport {generate} from './generate';\n\nexport function compileToFunctions(template){\n   let ast = parseHTML(template)\n    generate(ast); // 生成代码\n\n}\n","import {initState} from './state'\nimport {compileToFunctions} from './compiler/index.js'\nexport function initMixin(Vue){\n    Vue.prototype._init = function(options){\n        const vm = this;\n        vm.$options = options; // 实例上有个属性 $options，表示的是用户传入的所有参数\n        initState(vm); //初始化状态\n\n        if(vm.$options.el){ // 数据可以挂载到页面上\n            vm.$mount(vm.$options.el);\n        }\n    }\n    Vue.prototype.$mount = function(el){\n        el = document.querySelector(el);\n      \n        const vm = this;\n        const options = vm.$options;\n       \n        // 如果有render 就直接使用render\n        // 没有render 看有没有template属性\n        // 没有template 就接着找外部模版\n        if(!options.render){\n            let template = options.template; \n            if(!template && el){\n                template = el.outerHTML;\n               \n            }\n            // 如何将模版编译成render函数 \n            const render = compileToFunctions(template);\n            options.render = render;\n        }\n    }\n\n}\n\n","// Vue2.0 中就是一个构造函数 class\nimport {initMixin} from './init'\n\nfunction Vue (options){\n    console.log('options: ', options);\n    this._init(options); // 当用户new Vue时,就调用init方法进行vue的初始方法\n\n}\n\ninitMixin(Vue) //可以拆分逻辑到不同的文件中 更利于代码维护 模块化的概念\n\n\nexport default Vue;\n\n\n\n// 库 => rollup 项目开发webpack"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","result","call","console","log","inserted","slice","__ob__","observeArray","Observer","value","defineProperty","enumerable","configurable","isArray","__proto__","walk","data","keys","key","defineReactive","i","length","observe","get","set","newValue","initState","vm","opts","$options","props","initData","computed","watch","proxy","source","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","tag","attrs","type","chhidren","parent","root","currentParent","stack","start","tagName","element","push","end","pop","chars","text","replace","advance","n","substring","parseStartTag","match","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","generate","el","compileToFunctions","template","ast","initMixin","Vue","_init","options","$mount","document","querySelector","render","outerHTML"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EACA,IAAIA,oBAAoB,GAAGC,KAAK,CAACC,SAAjC;;EAIO,IAAIC,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAcJ,KAAK,CAACC,SAApB,CAAnB;;EAGP,IAAII,OAAO,GAAG,CACV,MADU,EAEV,KAFU,EAGV,OAHU,EAIV,QAJU,EAKV,SALU,EAMV,MANU,CAAd;EASAA,OAAO,CAACC,OAAR,CAAgB,UAAAC,MAAM,EAAI;EACtBL,EAAAA,YAAY,CAACK,MAAD,CAAZ,GAAuB,YAAiB;EAAA;;EAAA,sCAALC,IAAK;EAALA,MAAAA,IAAK;EAAA;;EAAE;EACtC;EACA,QAAIC,MAAM,GAAG,yBAAAV,oBAAoB,CAACQ,MAAD,CAApB,EAA6BG,IAA7B,+BAAkC,IAAlC,SAA0CF,IAA1C,EAAb;;EACAG,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAHoC;;EAKrC,QAAIC,QAAJ;;EACA,YAAON,MAAP;EACI,WAAK,MAAL;EACA,WAAK,SAAL;EACKM,QAAAA,QAAQ,GAAGL,IAAX;EACA;;EACJ,WAAK,QAAL;EAAe;EACXK,QAAAA,QAAQ,GAAGL,IAAI,CAACM,KAAL,CAAW,CAAX,CAAX;EANT;;EAWD,QAAGD,QAAH,EAAY;EAAE;EACR,WAAKE,MAAL,CAAYC,YAAZ,CAAyBH,QAAzB;EACL;;EAGA,WAAOJ,MAAP;EACF,GAvBD;EAwBH,CAzBD;;MChBMQ;EACF,oBAAYC,KAAZ,EAAmB;EAAA;;EAAE;EACjB;EACA;EACAf,IAAAA,MAAM,CAACgB,cAAP,CAAsBD,KAAtB,EAA6B,QAA7B,EAAuC;EACnCA,MAAAA,KAAK,EAAE,IAD4B;EAEnCE,MAAAA,UAAU,EAAE,KAFuB;EAEhB;EACnBC,MAAAA,YAAY,EAAE,KAHqB;;EAAA,KAAvC;;EAMA,QAAIrB,KAAK,CAACsB,OAAN,CAAcJ,KAAd,CAAJ,EAA0B;EACtB;EACA;EACAA,MAAAA,KAAK,CAACK,SAAN,GAAkBrB,YAAlB,CAHsB;EAItB;;EACA,WAAKc,YAAL,CAAkBE,KAAlB,EALsB;EAMzB,KAND,MAMO;EACH,WAAKM,IAAL,CAAUN,KAAV;EACH;EACJ;;;;aACD,cAAKO,IAAL,EAAW;EACP;EACAtB,MAAAA,MAAM,CAACuB,IAAP,CAAYD,IAAZ,EAAkBnB,OAAlB,CAA0B,UAACqB,GAAD,EAAS;EAC/BC,QAAAA,cAAc,CAACH,IAAD,EAAOE,GAAP,EAAYF,IAAI,CAACE,GAAD,CAAhB,CAAd;EACH,OAFD;EAGH;;;aACD,sBAAaT,KAAb,EAAoB;EAChB,WAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,KAAK,CAACY,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;EACnCE,QAAAA,OAAO,CAACb,KAAK,CAACW,CAAD,CAAN,CAAP;EACH;EACJ;;;;;;EAEL,SAASD,cAAT,CAAwBH,IAAxB,EAA8BE,GAA9B,EAAmCT,KAAnC,EAA0C;EAAE;EACxC;EACAa,EAAAA,OAAO,CAACb,KAAD,CAAP;EACAf,EAAAA,MAAM,CAACgB,cAAP,CAAsBM,IAAtB,EAA4BE,GAA5B,EAAiC;EAC7BK,IAAAA,GAD6B,iBACvB;EACF,aAAOd,KAAP;EACH,KAH4B;EAI7Be,IAAAA,GAJ6B,eAIzBC,QAJyB,EAIf;EACV,UAAIA,QAAQ,KAAKhB,KAAjB,EAAwB;EACxBa,MAAAA,OAAO,CAACG,QAAD,CAAP,CAFU;;EAGVhB,MAAAA,KAAK,GAAGgB,QAAR;EACH;EAR4B,GAAjC;EAUH;;EAEM,SAASH,OAAT,CAAiBN,IAAjB,EAAuB;EAC1B;EACA,MAAI,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,IAAI,IAAxC,EAA8C;EAC1C;EACH;;EACD,MAAIA,IAAI,CAACV,MAAT,EAAiB;EAAE;EACf;EACH,GAPyB;;;EAS1B,SAAO,IAAIE,QAAJ,CAAaQ,IAAb,CAAP;EACH;;ECvDM,SAASU,SAAT,CAAmBC,EAAnB,EAAsB;EACzB;EACA,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB,CAFyB;;EAGzB,MAAGD,IAAI,CAACE,KAAR,EAAc;;EAGd,MAAGF,IAAI,CAAChC,OAAR,EAAgB;;EAGhB,MAAGgC,IAAI,CAACZ,IAAR,EAAa;EAAE;EACXe,IAAAA,QAAQ,CAACJ,EAAD,CAAR;EACH;;EACD,MAAGC,IAAI,CAACI,QAAR,EAAiB;;EAGjB,MAAGJ,IAAI,CAACK,KAAR,EAAc;EAGjB;;EAED,SAASC,KAAT,CAAeP,EAAf,EAAkBQ,MAAlB,EAAyBjB,GAAzB,EAA6B;EACzBxB,EAAAA,MAAM,CAACgB,cAAP,CAAsBiB,EAAtB,EAAyBT,GAAzB,EAA6B;EACzBK,IAAAA,GADyB,iBACpB;EACD,aAAOI,EAAE,CAACQ,MAAD,CAAF,CAAWjB,GAAX,CAAP;EACH,KAHwB;EAIzBM,IAAAA,GAJyB,eAIrBC,QAJqB,EAIZ;EACTE,MAAAA,EAAE,CAACQ,MAAD,CAAF,CAAWjB,GAAX,IAAkBO,QAAlB;EACH;EANwB,GAA7B;EAQH;;EACD,SAASM,QAAT,CAAkBJ,EAAlB,EAAqB;EACjB;EAEA,MAAIX,IAAI,GAAGW,EAAE,CAACE,QAAH,CAAYb,IAAvB,CAHiB;;EAKjBA,EAAAA,IAAI,GAAIW,EAAE,CAACS,KAAH,GAAW,OAAOpB,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACf,IAAL,CAAU0B,EAAV,CAA7B,GAA6CX,IAAhE,CALiB;;EAQjB,OAAI,IAAIE,GAAR,IAAeF,IAAf,EAAoB;EAChBkB,IAAAA,KAAK,CAACP,EAAD,EAAI,OAAJ,EAAYT,GAAZ,CAAL,CADgB;EAEnB,GAVgB;;;EAYjBI,EAAAA,OAAO,CAACN,IAAD,CAAP;EACH;;EC9CD,IAAMqB,MAAM,iCAAZ;EACA,IAAMC,YAAY,iBAAUD,MAAV,kBAAwBA,MAAxB,MAAlB;EACA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,EAArB;;EACA,IAAMG,MAAM,GAAG,IAAID,MAAJ,gBAAmBF,YAAnB,YAAf;;EACA,IAAMI,SAAS,GAAG,2EAAlB;;EAEA,IAAMC,aAAa,GAAG,YAAtB;EAKA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEO,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;EAC5B,WAASC,gBAAT,CAA0BC,GAA1B,EAA+BC,KAA/B,EAAsC;EAClC,WAAO;EACHD,MAAAA,GAAG,EAAHA,GADG;EAEHE,MAAAA,IAAI,EAAE,CAFH;EAGHC,MAAAA,QAAQ,EAAE,EAHP;EAIHF,MAAAA,KAAK,EAALA,KAJG;EAKHG,MAAAA,MAAM,EAAE;EALL,KAAP;EAOH;;EACD,MAAIC,IAAI,GAAG,IAAX;EACA,MAAIC,aAAJ;EACA,MAAIC,KAAK,GAAG,EAAZ,CAZ4B;;EAc5B,WAASC,KAAT,CAAeC,OAAf,EAAwBR,KAAxB,EAA+B;EAC3B,QAAIS,OAAO,GAAGX,gBAAgB,CAACU,OAAD,EAAUR,KAAV,CAA9B;;EACA,QAAI,CAACI,IAAL,EAAW;EACPA,MAAAA,IAAI,GAAGK,OAAP;EACH;;EACDJ,IAAAA,aAAa,GAAGI,OAAhB;EACAH,IAAAA,KAAK,CAACI,IAAN,CAAWD,OAAX;EACH;;EACD,WAASE,GAAT,CAAaH,OAAb,EAAsB;EAClB,QAAIC,OAAO,GAAGH,KAAK,CAACM,GAAN,EAAd;EACAP,IAAAA,aAAa,GAAGC,KAAK,CAACA,KAAK,CAACjC,MAAN,GAAe,CAAhB,CAArB;;EACA,QAAIgC,aAAJ,EAAmB;EACfI,MAAAA,OAAO,CAACN,MAAR,GAAiBE,aAAjB;EACAA,MAAAA,aAAa,CAACH,QAAd,CAAuBQ,IAAvB,CAA4BD,OAA5B;EACH;EACJ;;EACD,WAASI,KAAT,CAAeC,IAAf,EAAqB;EACjBA,IAAAA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP;;EACA,QAAID,IAAJ,EAAU;EACNT,MAAAA,aAAa,CAACH,QAAd,CAAuBQ,IAAvB,CAA4B;EACxBT,QAAAA,IAAI,EAAE,CADkB;EAExBa,QAAAA,IAAI,EAAJA;EAFwB,OAA5B;EAIH;EACJ;;EACD,WAASE,OAAT,CAAiBC,CAAjB,EAAoB;EAChBpB,IAAAA,IAAI,GAAGA,IAAI,CAACqB,SAAL,CAAeD,CAAf,CAAP;EACH;;EACD,WAASE,aAAT,GAAyB;EACrB,QAAMZ,KAAK,GAAGV,IAAI,CAACuB,KAAL,CAAW7B,YAAX,CAAd;;EACA,QAAIgB,KAAJ,EAAW;EACP,UAAIa,KAAK,GAAG;EACRZ,QAAAA,OAAO,EAAED,KAAK,CAAC,CAAD,CADN;EAERP,QAAAA,KAAK,EAAE;EAFC,OAAZ;EAIAgB,MAAAA,OAAO,CAACT,KAAK,CAAC,CAAD,CAAL,CAASlC,MAAV,CAAP,CALO;EAMP;;EACA,UAAIsC,IAAJ,EAASU,IAAT,CAPO;;;EAQP,aAAO,EAAEV,IAAG,GAAGd,IAAI,CAACuB,KAAL,CAAWzB,aAAX,CAAR,MAAuC0B,IAAI,GAAGxB,IAAI,CAACuB,KAAL,CAAW1B,SAAX,CAA9C,CAAP,EAA6E;EAEzEsB,QAAAA,OAAO,CAACK,IAAI,CAAC,CAAD,CAAJ,CAAQhD,MAAT,CAAP;EACA+C,QAAAA,KAAK,CAACpB,KAAN,CAAYU,IAAZ,CAAiB;EAAEY,UAAAA,IAAI,EAAED,IAAI,CAAC,CAAD,CAAZ;EAAiB5D,UAAAA,KAAK,EAAE4D,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD,CAA1B,IAAiC;EAAzD,SAAjB;EACH;;EACD,UAAIV,IAAJ,EAAS;EACLK,QAAAA,OAAO,CAACL,IAAG,CAAC,CAAD,CAAH,CAAOtC,MAAR,CAAP;EACA,eAAO+C,KAAP;EACH;EACJ;EAEJ;;EAED,SAAOvB,IAAP,EAAa;EACT,QAAI0B,OAAO,GAAG1B,IAAI,CAAC2B,OAAL,CAAa,GAAb,CAAd;;EACA,QAAID,OAAO,KAAK,CAAhB,EAAmB;EACf,UAAIE,aAAa,GAAGN,aAAa,EAAjC;;EACA,UAAIM,aAAJ,EAAmB;EACf;EACAlB,QAAAA,KAAK,CAACkB,aAAa,CAACjB,OAAf,EAAwBiB,aAAa,CAACzB,KAAtC,CAAL;EACA;EACH,OANc;EAQf;;;EACA,UAAI0B,WAAW,GAAG7B,IAAI,CAACuB,KAAL,CAAW3B,MAAX,CAAlB;;EACA,UAAIiC,WAAJ,EAAiB;EACbV,QAAAA,OAAO,CAACU,WAAW,CAAC,CAAD,CAAX,CAAerD,MAAhB,CAAP,CADa;;EAGbsC,QAAAA,GAAG,CAACe,WAAW,CAAC,CAAD,CAAZ,CAAH;EACA;EACH;EACJ;;EACD,QAAIZ,IAAI,SAAR;;EACA,QAAIS,OAAO,GAAG,CAAd,EAAiB;EAAE;EACfT,MAAAA,IAAI,GAAGjB,IAAI,CAACqB,SAAL,CAAe,CAAf,EAAkBK,OAAlB,CAAP;EACH;;EACD,QAAIT,IAAJ,EAAU;EACNE,MAAAA,OAAO,CAACF,IAAI,CAACzC,MAAN,CAAP,CADM;;EAGNwC,MAAAA,KAAK,CAACC,IAAD,CAAL;EACH;EAEJ;;EACD,SAAOV,IAAP;EACH;;EC1HM,SAASuB,QAAT,CAAkBC,EAAlB,EAAqB;EACxB1E,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoByE,EAApB;EAEH;;ECDM,SAASC,kBAAT,CAA4BC,QAA5B,EAAqC;EACzC,MAAIC,GAAG,GAAGnC,SAAS,CAACkC,QAAD,CAAnB;EACCH,EAAAA,QAAQ,CAACI,GAAD,CAAR,CAFwC;EAI3C;;ECLM,SAASC,SAAT,CAAmBC,GAAnB,EAAuB;EAC1BA,EAAAA,GAAG,CAACzF,SAAJ,CAAc0F,KAAd,GAAsB,UAASC,OAAT,EAAiB;EACnC,QAAMxD,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcsD,OAAd,CAFmC;;EAGnCzD,IAAAA,SAAS,CAACC,EAAD,CAAT,CAHmC;;EAKnC,QAAGA,EAAE,CAACE,QAAH,CAAY+C,EAAf,EAAkB;EAAE;EAChBjD,MAAAA,EAAE,CAACyD,MAAH,CAAUzD,EAAE,CAACE,QAAH,CAAY+C,EAAtB;EACH;EACJ,GARD;;EASAK,EAAAA,GAAG,CAACzF,SAAJ,CAAc4F,MAAd,GAAuB,UAASR,EAAT,EAAY;EAC/BA,IAAAA,EAAE,GAAGS,QAAQ,CAACC,aAAT,CAAuBV,EAAvB,CAAL;EAEA,QAAMjD,EAAE,GAAG,IAAX;EACA,QAAMwD,OAAO,GAAGxD,EAAE,CAACE,QAAnB,CAJ+B;EAO/B;EACA;;EACA,QAAG,CAACsD,OAAO,CAACI,MAAZ,EAAmB;EACf,UAAIT,QAAQ,GAAGK,OAAO,CAACL,QAAvB;;EACA,UAAG,CAACA,QAAD,IAAaF,EAAhB,EAAmB;EACfE,QAAAA,QAAQ,GAAGF,EAAE,CAACY,SAAd;EAEH,OALc;;;EAOf,UAAMD,MAAM,GAAGV,kBAAkB,CAACC,QAAD,CAAjC;EACAK,MAAAA,OAAO,CAACI,MAAR,GAAiBA,MAAjB;EACH;EACJ,GAnBD;EAqBH;;ECjCD;;EAGA,SAASN,GAAT,CAAcE,OAAd,EAAsB;EAClBjF,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBgF,OAAzB;;EACA,OAAKD,KAAL,CAAWC,OAAX,EAFkB;;EAIrB;;EAEDH,SAAS,CAACC,GAAD,CAAT;;;;;;;;;"}